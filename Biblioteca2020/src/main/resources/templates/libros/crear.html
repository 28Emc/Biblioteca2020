<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="layout/layout :: head"></head>
<body>
	<header th:replace="layout/layout :: header"></header>
	<div class="container-fluid my-5">
		<h1 class="text-warning" th:text="${titulo}"></h1>
		<h1 hidden th:text="${id}"></h1>
		<form th:action="${editable} ?@{/libros/editar} :@{/libros/crear}"
			th:object="${libro}" method="post">
			<h3 class="mb-4">Nombre</h3>
			<div class="form-group">
				<div class="col-sm-6">
					<input class="form-control" type="text" name="titulo"
						th:field="*{titulo}" />
				</div>
			</div>

			<h3 class="mb-4">Autor</h3>
			<div class="form-group">
				<div class="col-sm-6">
					<input class="form-control" type="text" name="autor"
						th:field="*{autor}" />
				</div>
			</div>

			<h3 class="mb-4">Descripción</h3>
			<div class="form-group">
				<div class="col-sm-6">
					<textarea class="form-control" rows="3" name="descripcion"
						th:field="*{descripcion}" /></textarea>
				</div>
			</div>

			<h3 class="mb-4">Categoría</h3>
			<div class="form-group">
				<div class="col-sm-6">
					<input type="text" name="categoria" id="categoria"
						placeholder="Categoria" class="form-control"
						th:field="*{categoria}" />
				</div>
			</div>

			<h3 class="mb-4">Local</h3>
			<div class="form-group">
				<div class="col-sm-6">
					<select class="form-control" th:field="${locales}"
						th:errorclass="'form-control alert-danger'">
						<option th:each="local :${locales}" th:value="${local.id}"
							th:text="${local.direccion}"></option>
					</select> <small class="form-text text-danger"
						th:if="${#fields.hasErrors('locales')}" th:errors="${local.id}"></small>
				</div>
			</div>

			<h3 class="mb-4">Fecha Publicación</h3>
			<div class="form-group">
				<div class="col-sm-6">
					<input class="form-control" type="date" name="fecha_publicacion" />
				</div>
			</div>

			<div class="form-group row">
				<div class="col-sm-6">
					<a class="btn btn-light btn-block" th:href="@{'/libros/cancelar/'+${id}}">Cancelar</a>
				</div>
				<div class="col-sm-6">
					<input class="btn btn-dark btn-block" type="submit"
						th:value="${editable}?'Guardar Libro':'Registrar Libro'" />
				</div>
			</div>

		</form>
	</div>
	<footer th:replace="layout/layout :: footer"></footer>
	<script th:replace="layout/autocomplete-categorias :: javascript"></script>
	<script th:replace="layout/autocomplete-locales :: javascript"></script>
</body>
</html>